<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>分公司统计数据表</title>
    <!-- 引入 echarts.js -->
    <!-- 远程配置 -->
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
    <!-- 本地配置 -->
    <!-- <script src="./JS/echarts.js"></script> -->
</head>

<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 100%;height:550px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        var option = {
            toolbox: {
                show: true,
                //插件功能栏开始
                feature: {
                    //缩放还在学习 注意是在feature内
                    // dataZoom: {
                    // yAxisIndex: "none"
                    // },
                    dataView: {
                    //是否不可编辑（只读）
                    readOnly: false
                    },
                    magicType: {
                    type: ["line", "bar"]
                    },
                    restore: {},
                    saveAsImage: {},
                },
                //插件功能栏结束
                showTitle: true,
                itemGap: 10,
                //工具栏位置
                top: "7%",
                right: "5%",
                // 标识颜色
                iconStyle: {
                borderColor: "rgba(114, 230, 12, 1)"
                },
            },
            title: {
                "text": "全年活跃率-数据均为百分比",
                "subtext": "BY Shen Liang (更新中)",
                x: "3%",

                textStyle: {
                    color: '#fff',
                    fontSize: '25'
                },
                subtextStyle: {
                    color: '#90979c',
                    fontSize: '16',

                },
                //主副标题之间的间距
                itemGap: 5,
            },
            backgroundColor: '#323a5e',
            // 提示框组件
            tooltip: {
                trigger: 'axis',//坐标轴触发，主要在柱状图，折线图等会使用类目轴的图表中使用。
                axisPointer: { // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            grid: {
                left: '2%',
                right: '4%',
                bottom: '14%',
                top: '16%',
                containLabel: true
            },
            legend: {
                type: "plain",
                data: ['平均','黔西南','黔南', '黔东南', '遵义','铜仁','六盘水','安顺', '贵阳','观山湖','毕节'],
                right: 20,
                top: 12,
                textStyle: {
                    color: "#fff"
                },
                // 图例选中状态表
                // '系列1': true,默认均为true
                // '系列2': false
                selected: {
                '贵阳'      : false,
                '遵义'      : false,
                '黔东南'    : false,
                '黔南'      : false,
                '黔西南'    : false,
                '铜仁'      : false,
                '安顺'      : false,
                '毕节'      : false,
                '六盘水'    : false,
                '平均'      :false,
                },
                itemWidth: 10,
                itemHeight: 10,
                // itemGap: 35
            },
            xAxis: {
                type: 'category',
                data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                axisLine: {
                    lineStyle: {
                        color: 'white'

                    }
                },
                axisLabel: {
                    // interval: 0,
                    // rotate: 40,
                    textStyle: {
                        fontFamily: 'Microsoft YaHei'
                    }
                },
            },

            yAxis: {
                type: 'value',
                max: '100',
                axisLine: {
                    show: false,
                    lineStyle: {
                        color: 'white'
                    }
                },
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(255,255,255,0.3)'
                    }
                },
                axisLabel: {}
            },
            "dataZoom": [{//滑动图标
                "show": true,
                // 滑动控件大小
                "height": 15,
                "xAxisIndex": [
                    0
                ],
                bottom: '8%',
                "start": 10,
                "end": 90,
                //下滑空间制作图，单独学习
                handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
                handleSize: '110%',
                handleStyle: {
                    color: "#d3dee5",

                },
                textStyle: {
                    color: "#fff"
                },
                borderColor: "#90979c"
            }, {
                "type": "inside",
                "show": true,
                "height": 15,
                "start": 1,
                "end": 35
            }],
            // 显示数据图形
            series: [{
                name: '黔西南',
                type: 'bar',
                barWidth: '6%',
                // 柱状图数据显示
                label:{
                    show:true,                              //是否显示
                    // color: "rgba(252, 252, 252, 1)",     //字体颜色
                    // textShadowColor: "rgba(4, 4, 4, 1)", //背影颜色
                    // fontWeight: "bold",                  //字体家属
                    position: "insideTop",    //标签位置
                    //rotate: 90              //旋转度数
                },
                // itemStyle. barBorderRadius圆角半径，单位px，支持传入数组分别指定 4 个圆角半径
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#fccb05'
                        }, {
                            offset: 1,
                            color: '#f5804d'
                        }]),
                        barBorderRadius: 12,
                    },
                },

                data: [ 26.6,
                        20.7,
                        21.3,
                        25.0,
                        25.5,
                        34.7,
                        42.4,
                        36.6,
                        41.3,
                        50.7,
                        41.3,
                    ]
            },
            {
                name: '黔南',
                type: 'bar',
                barWidth: '6%',
                label:{
                    show:true,
                    position: 'inside',
                    //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#8bd46e'
                        }, {
                            offset: 1,
                            color: '#09bcb7'
                        }]),
                        barBorderRadius: 11,
                    }

                },
                data: [
                    33.5,
                    24.4,
                    20.6,
                    23.7,
                    20.5,
                    32.1,
                    45.2,
                    41.1,
                    42.4,
                    53.9,
                    41.1,
                ]
            },
            {
                name: '黔东南',
                type: 'bar',
                barWidth: '6%',
                label:{
                    show:true,
                    position: 'insideBottom',
                    //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#248ff7'
                        }, {
                            offset: 1,
                            color: '#6851f1'
                        }]),
                        barBorderRadius: 11,
                    }
                },
                data: [
                29.5,
                23.7,
                21.8,
                26.1,
                21.1,
                30.5,
                44.4,
                41.1,
                41.4,
                52.6,
                38.1,
                ]
            },
            {
                name: '遵义',
                type: 'bar',
                barWidth: '6%',
                label:{
                    show:true,
                    position: 'insideTop',
                    //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#09bcb7'
                        }, {
                            offset: 1,
                            color: '#8bd46e'
                        }]),
                        barBorderRadius: 11,
                    }
                },
                data: [
                29.3,
                24.6,
                22.8,
                29.2,
                26.2,
                35.0,
                45.5,
                43.0,
                45.6,
                56.7,
                46.1,
                ]
            },
            {
                name: '铜仁',
                type: 'bar',
                barWidth: '6%',
                label:{
                    show:true,
                    position: 'inside',
                    //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#AAC71A'
                        }, {
                            offset: 1,
                            color: '#07F597'
                        }]),
                        barBorderRadius: 11,
                    }
                },
                data: [
                26.2,
                20.0,
                18.3,
                23.0,
                21.4,
                31.3,
                43.4,
                38.8,
                37.0,
                49.0,
                36.1,
                ]
            },
            {
                name: '六盘水',
                type: 'bar',
                barWidth: '6%',
                label:{
                    show:true,
                    position: 'insideBottom',
                    //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#9CAACA'
                        }, {
                            offset: 1,
                            color: '#388720'
                        }]),
                        barBorderRadius: 11,
                    }
                },
                data: [
                29.6,
                25.2,
                21.9,
                29.6,
                28.1,
                39.6,
                48.4,
                40.7,
                46.5,
                56.8,
                49.2,
                ]
            },
            {
                name: '安顺',
                type: 'bar',
                barWidth: '6%',
                label:{
                    show:true,
                    position: 'insideTop',
                   //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#2E5BBD'
                        }, {
                            offset: 1,
                            color: '#D361BF'
                        }]),
                        barBorderRadius: 11,
                    }
                },
                data: [
                32.7,
                24.4,
                20.5,
                24.9,
                24.1,
                32.2,
                42.1,
                39.7,
                45.5,
                57.5,
                50.5,
                ]
            },
            {
                name: '贵阳',
                type: 'bar',
                barWidth: '6%',
                label:{
                    show:true,
                    position: 'inside',
                    //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#4E2F2F'
                        }, {
                            offset: 1,
                            color: '#9F9F5F'
                        }]),
                        barBorderRadius: 11,
                    }
                },
                data: [
                30.1,
                24.6,
                24.6,
                27.3,
                26.9,
                34.2,
                43.2,
                38.3,
                42.6,
                54.1,
                43.0,
                ]
            },
            {
                name: '观山湖',
                type: 'bar',
                barWidth: '6%',
                label:{
                    show:true,
                    position: 'insideBottom',
                    //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#CFD818'
                        }, {
                            offset: 1,
                            color: '#D74F2B'
                        }]),
                        barBorderRadius: 11,
                    }
                },
                data: [
                23.1,
                17.0,
                17.2,
                29.3,
                38.8,
                49.5,
                63.0,
                57.6,
                61.6,
                67.8,
                59.5,
                ]
            },
            {
                name: '毕节',
                type: 'bar',
                barWidth: '6%',
                // 柱状图标签数据显示
                label:{
                    show:true,
                    position: 'insideTop',
                    //rotate: 90
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#856363'
                        }, {
                            offset: 1,
                            color: '#7093DB'
                        }]),
                        barBorderRadius: 11,
                    }
                },
                data: [
                27.7,
                23.5,
                25.5,
                28.2,
                28.5,
                35.6,
                43.2,
                36.9,
                42.9,
                53.4,
                47.8,
                ]
            },
            {
            name: "平均",
            type: "line",
            symbolSize:10,
            symbol:'circle',
            itemStyle: {
                normal: {
                    // color: '#F0190F'
                    // color: "rgba(203, 220, 33,1)",
                    color: "rgba(4, 233, 249, 1)",
                    barBorderRadius: 0,
                    label: {
                        show: true,
                        position: "top",
                        formatter: function(p) {
                            return p.value > 0 ? (p.value) : '';
                        }
                    }
                }
            },
            data: [29.2,23.7,22.6,27.3,25.4,34.3,44.9,40.7,44.0,54.9,44.7,0]
            },
            ]
        };

        var app = {
            currentIndex: -1,
        };
       //定时刷新
        setInterval(function () {
            var dataLen = option.series[0].data.length;
            //触发图表行为（更改变图表显示的相关动态），例如图例开关legendToggleSelect, 数据区域缩放dataZoom，显示提示框showTip等等
            // 取消之前高亮的图形
            myChart.dispatchAction({
                type: 'downplay',
                seriesIndex: 0,
                dataIndex: app.currentIndex  //关联前面var app
            });
            app.currentIndex = (app.currentIndex + 1) % dataLen;
            //console.log(app.currentIndex);
            // 高亮当前图形
            myChart.dispatchAction({
                type: 'highlight',
                seriesIndex: 0,
                dataIndex: app.currentIndex,
            });
            // 显示 tooltip
            myChart.dispatchAction({
                type: 'showTip',
                seriesIndex: 0,
                dataIndex: app.currentIndex
            });

            // 刷新时间
        }, 10000);
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>
</body>

</html>
